(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),u=n(2),o=n.n(u),i=n(3),s=n(1),m=n(7),d="http://localhost:8765";function p(){return(p=Object(i.a)(o.a.mark((function e(t,n){var a,r,l,c,u,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=null,e.next=4,fetch("".concat(d,"/api/index.php"),{method:"post",mode:"cors",headers:{"Content-Type":"text/plain"},body:JSON.stringify({searchType:t,searchString:n})});case 4:return l=e.sent,e.next=7,l.json();case 7:if("success"===(c=e.sent).result){e.next=11;break}return r=c.result,e.abrupt("return",{error:r,countries:a});case 11:a=c.data,u=Object(m.a)(a);try{for(u.s();!(i=u.n()).done;)(s=i.value).region=""===s.region?"(None)":s.region,s.subregion=""===s.subregion?"(None)":s.subregion}catch(o){u.e(o)}finally{u.f()}return e.abrupt("return",{error:r,countries:a});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e,t){return p.apply(this,arguments)};var E=function(e){var t=Object(a.useState)("country-name"),n=Object(s.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),i=o[0],m=o[1],d=function(e){var t=e.target,n=t.name,a=t.value;"searchString"===n&&m(a),"searchType"===n&&c(a)};return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Search Form"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.searchSubmit(l,i)}},r.a.createElement("input",{type:"text",value:i,name:"searchString",onChange:d}),r.a.createElement("div",{id:"search-type-selection"},r.a.createElement("div",null,r.a.createElement("input",{type:"radio",value:"country-name",name:"searchType",onChange:d,checked:"country-name"===l}),r.a.createElement("label",null,"Country name")),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",value:"full-name",name:"searchType",onChange:d,checked:"full-name"===l}),r.a.createElement("label",null,"Full name"))," ",r.a.createElement("div",null,r.a.createElement("input",{type:"radio",value:"country-code",name:"searchType",onChange:d,checked:"country-code"===l}),r.a.createElement("label",null,"Country code"))),r.a.createElement("button",{type:"submit"},r.a.createElement("span",{className:"emoji",role:"img","aria-label":"globe"},"\ud83c\udf0d"),"Search")))};var g=function(e){var t=e.error;return r.a.createElement("div",{className:"error-box"},"errorEmptySearch"===t&&r.a.createElement("div",null,r.a.createElement("p",null,"It looks like you've left the search box empty!")),"errorNoResults"===t&&r.a.createElement("div",null,r.a.createElement("p",null,"Unfortunately, while your search was successfully completed, it didn't return any results. Try fixing the spelling or typing something else."),r.a.createElement("p",null,"If you're still having trouble, perhaps go for a walk outside. I know it often helps me.")),"errorServerError"===t&&r.a.createElement("div",null,r.a.createElement("p",null,"Hmm... the external API returned a 400 error. Most likely no results were found; try modifying your search terms and try again.")),"errorUnknownError"===t&&r.a.createElement("div",null,r.a.createElement("p",null,"Oh boy. We've received some unknown error. Go find the person who wrote this program and tell them!")))};var v=function(e){var t=e.countries;return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Search Results"),r.a.createElement("div",{id:"search-results"},r.a.createElement("div",{className:"heading"},"Name"),r.a.createElement("div",{className:"heading"},"Alpha Code 2"),r.a.createElement("div",{className:"heading"},"Alpha Code 3"),r.a.createElement("div",{className:"heading"},"Region"),r.a.createElement("div",{className:"heading"},"Subregion"),r.a.createElement("div",{className:"heading"},"Population"),r.a.createElement("div",{className:"heading"},"Languages"),r.a.createElement("div",{className:"heading"},"Flag"),t.map((function(e,t){return r.a.createElement(a.Fragment,{key:t},r.a.createElement("div",null,e.name),r.a.createElement("div",null,e.alpha2Code),r.a.createElement("div",null,e.alpha3Code),r.a.createElement("div",null,e.region),r.a.createElement("div",null,e.subregion),r.a.createElement("div",null,e.population.toLocaleString()),r.a.createElement("div",null,e.languages.map((function(e){return e.name})).reduce((function(e,t){return"".concat(e,", ").concat(t)}))),r.a.createElement("div",null,r.a.createElement("img",{className:"flag",alt:"flag",src:e.flag})))}))))};var b=function(e){var t=function(e){var t=0,n={},a={};return Object.values(e).forEach((function(e){t+=1,Object.keys(n).includes(e.region)?n[e.region]=n[e.region]+1:n[e.region]=1,Object.keys(a).includes(e.subregion)?a[e.subregion]=a[e.subregion]+1:a[e.subregion]=1})),{countryCount:t,regionCount:n,subregionCount:a}}(e.countries),n=t.countryCount,l=t.regionCount,c=t.subregionCount;return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Statistics"),r.a.createElement("div",{id:"statistics-box"},r.a.createElement("div",null,"Country count:"),r.a.createElement("div",null,n),r.a.createElement("div",null,"Region count:"),r.a.createElement("div",null,Object.entries(l).map((function(e,t){var n=Object(s.a)(e,2),a=n[0],l=n[1];return r.a.createElement("span",{className:"region",key:t},a,": ",l)}))),r.a.createElement("div",null,"Subregion count:"),r.a.createElement("div",null,Object.entries(c).map((function(e,t){var n=Object(s.a)(e,2),a=n[0],l=n[1];return r.a.createElement("span",{className:"subregion",key:t},a,": ",l)})))))};n(14);var y=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),m=u[0],d=u[1],p=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:a=e.sent,r=a.error,c=a.countries,d(r),l(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Country Search"),r.a.createElement(E,{searchSubmit:p}),m&&r.a.createElement(g,{error:m}),n.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement(v,{countries:n}),r.a.createElement(b,{countries:n})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.956e2874.chunk.js.map